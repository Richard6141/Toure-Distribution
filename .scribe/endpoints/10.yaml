name: 'Gestion des Mouvements de Stock'
description: ''
endpoints:
  -
    httpMethods:
      - GET
    uri: api/stock-movements
    metadata:
      groupName: 'Gestion des Mouvements de Stock'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: |-
        Récupère la liste paginée de tous les mouvements de stock avec leurs détails complets.
        Cette endpoint supporte le filtrage avancé, la recherche et le tri.
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'required Bearer Token. Example: Bearer 1|abc123xyz456'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters:
      movement_type:
        name: movement_type
        description: 'Filtrer par type de mouvement Entrée (in), Sortie (out), Transfert (transfer).'
        required: false
        example: architecto
        type: string
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      statut:
        name: statut
        description: 'Filtrer par statut (pending, completed, cancelled).'
        required: false
        example: pending
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      entrepot_from_id:
        name: entrepot_from_id
        description: 'Filtrer par entrepôt source (UUID).'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440001
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      entrepot_to_id:
        name: entrepot_to_id
        description: 'Filtrer par entrepôt destination (UUID).'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440002
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      client_id:
        name: client_id
        description: 'Filtrer par client (UUID).'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440101
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      fournisseur_id:
        name: fournisseur_id
        description: 'Filtrer par fournisseur (UUID).'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440100
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      search:
        name: search
        description: 'Rechercher par numéro de référence.'
        required: false
        example: MV-2024
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      date_from:
        name: date_from
        description: 'date Filtrer par date de début (YYYY-MM-DD).'
        required: false
        example: '2024-01-01'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      date_to:
        name: date_to
        description: 'date Filtrer par date de fin (YYYY-MM-DD).'
        required: false
        example: '2024-12-31'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      sort_by:
        name: sort_by
        description: 'Champ sur lequel trier (défaut: created_at).'
        required: false
        example: reference
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      sort_order:
        name: sort_order
        description: 'Ordre de tri: asc ou desc (défaut: desc).'
        required: false
        example: desc
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      per_page:
        name: per_page
        description: "Nombre d'éléments par page (défaut: 15)."
        required: false
        example: 20
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanQueryParameters:
      movement_type: architecto
      statut: pending
      entrepot_from_id: 550e8400-e29b-41d4-a716-446655440001
      entrepot_to_id: 550e8400-e29b-41d4-a716-446655440002
      client_id: 550e8400-e29b-41d4-a716-446655440101
      fournisseur_id: 550e8400-e29b-41d4-a716-446655440100
      search: MV-2024
      date_from: '2024-01-01'
      date_to: '2024-12-31'
      sort_by: reference
      sort_order: desc
      per_page: 20
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "data": [
                {
                  "stock_movement_id": "550e8400-e29b-41d4-a716-446655440030",
                  "reference": "MV-2024-00001",
                  "movement_type": "transfert",
                  "statut": "pending"
                }
              ],
              "current_page": 1,
              "per_page": 15,
              "total": 1
            },
            "message": "Mouvements de stock récupérés avec succès"
          }
        headers: []
        description: Succès
        custom: []
      -
        status: 401
        content: |-
          {
            "message": "Unauthenticated."
          }
        headers: []
        description: 'Non authentifié'
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - GET
    uri: 'api/stock-movements/{id}'
    metadata:
      groupName: 'Gestion des Mouvements de Stock'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: "Récupère les détails complets d'un mouvement de stock spécifique avec toutes ses relations."
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'required Bearer Token. Example: Bearer 1|abc123xyz456'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'UUID du mouvement.'
        required: true
        example: 550e8400-e29b-41d4-a716-446655440030
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanUrlParameters:
      id: 550e8400-e29b-41d4-a716-446655440030
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "stock_movement_id": "550e8400-e29b-41d4-a716-446655440030",
              "reference": "MV-2024-00003",
              "statut": "pending"
            },
            "message": "Mouvement de stock récupéré avec succès"
          }
        headers: []
        description: Succès
        custom: []
      -
        status: 401
        content: |-
          {
            "message": "Unauthenticated."
          }
        headers: []
        description: ''
        custom: []
      -
        status: 404
        content: |-
          {
            "success": false,
            "message": "Mouvement de stock non trouvé"
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - PUT
    uri: 'api/stock-movements/{id}'
    metadata:
      groupName: 'Gestion des Mouvements de Stock'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Met à jour complètement un mouvement de stock (PUT). Remplace tous les champs et détails.'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'required Bearer Token. Example: Bearer 1|abc123xyz456'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'UUID du mouvement.'
        required: true
        example: 550e8400-e29b-41d4-a716-446655440030
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanUrlParameters:
      id: 550e8400-e29b-41d4-a716-446655440030
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      movement_type:
        name: movement_type
        description: ''
        required: false
        example: architecto
        type: string
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      entrepot_from_id:
        name: entrepot_from_id
        description: 'optional UUID source.'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440001
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      entrepot_to_id:
        name: entrepot_to_id
        description: 'optional UUID destination.'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440002
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      fournisseur_id:
        name: fournisseur_id
        description: 'optional UUID fournisseur.'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440100
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      client_id:
        name: client_id
        description: 'optional UUID client.'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440101
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      statut:
        name: statut
        description: 'Statut (pending, completed, cancelled).'
        required: true
        example: pending
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      note:
        name: note
        description: 'optional Note.'
        required: false
        example: '"Note mise à jour"'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      details:
        name: details
        description: 'Nouveaux détails (minimum 1).'
        required: true
        example:
          -
            product_id: 550e8400-e29b-41d4-a716-446655440003
            quantite: 15
        type: 'string[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'details[].product_id':
        name: 'details[].product_id'
        description: 'UUID produit.'
        required: true
        example: 550e8400-e29b-41d4-a716-446655440003
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'details[].quantite':
        name: 'details[].quantite'
        description: 'Quantité (minimum 1).'
        required: true
        example: 15
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      movement_type: architecto
      entrepot_from_id: 550e8400-e29b-41d4-a716-446655440001
      entrepot_to_id: 550e8400-e29b-41d4-a716-446655440002
      fournisseur_id: 550e8400-e29b-41d4-a716-446655440100
      client_id: 550e8400-e29b-41d4-a716-446655440101
      statut: pending
      note: '"Note mise à jour"'
      details:
        -
          product_id: 550e8400-e29b-41d4-a716-446655440003
          quantite: 15
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "data": {},
            "message": "Mouvement de stock mis à jour avec succès"
          }
        headers: []
        description: Succès
        custom: []
      -
        status: 401
        content: |-
          {
            "message": "Unauthenticated."
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - PATCH
    uri: 'api/stock-movements/{id}'
    metadata:
      groupName: 'Gestion des Mouvements de Stock'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Met à jour complètement un mouvement de stock (PUT). Remplace tous les champs et détails.'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'required Bearer Token. Example: Bearer 1|abc123xyz456'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'UUID du mouvement.'
        required: true
        example: 550e8400-e29b-41d4-a716-446655440030
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanUrlParameters:
      id: 550e8400-e29b-41d4-a716-446655440030
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      movement_type:
        name: movement_type
        description: ''
        required: false
        example: architecto
        type: string
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      entrepot_from_id:
        name: entrepot_from_id
        description: 'optional UUID source.'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440001
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      entrepot_to_id:
        name: entrepot_to_id
        description: 'optional UUID destination.'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440002
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      fournisseur_id:
        name: fournisseur_id
        description: 'optional UUID fournisseur.'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440100
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      client_id:
        name: client_id
        description: 'optional UUID client.'
        required: false
        example: 550e8400-e29b-41d4-a716-446655440101
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      statut:
        name: statut
        description: 'Statut (pending, completed, cancelled).'
        required: true
        example: pending
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      note:
        name: note
        description: 'optional Note.'
        required: false
        example: '"Note mise à jour"'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      details:
        name: details
        description: 'Nouveaux détails (minimum 1).'
        required: true
        example:
          -
            product_id: 550e8400-e29b-41d4-a716-446655440003
            quantite: 15
        type: 'string[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'details[].product_id':
        name: 'details[].product_id'
        description: 'UUID produit.'
        required: true
        example: 550e8400-e29b-41d4-a716-446655440003
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'details[].quantite':
        name: 'details[].quantite'
        description: 'Quantité (minimum 1).'
        required: true
        example: 15
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      movement_type: architecto
      entrepot_from_id: 550e8400-e29b-41d4-a716-446655440001
      entrepot_to_id: 550e8400-e29b-41d4-a716-446655440002
      fournisseur_id: 550e8400-e29b-41d4-a716-446655440100
      client_id: 550e8400-e29b-41d4-a716-446655440101
      statut: pending
      note: '"Note mise à jour"'
      details:
        -
          product_id: 550e8400-e29b-41d4-a716-446655440003
          quantite: 15
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "data": {},
            "message": "Mouvement de stock mis à jour avec succès"
          }
        headers: []
        description: Succès
        custom: []
      -
        status: 401
        content: |-
          {
            "message": "Unauthenticated."
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/stock-movements/transfer/warehouse
    metadata:
      groupName: 'Gestion des Mouvements de Stock'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: |-
        Crée un nouveau mouvement de transfert de stock entre deux entrepôts différents.
        La référence du mouvement est générée automatiquement au format MV-YYYY-XXXXX.

        **Options de validation :**
        - **Mode par défaut** : Le transfert est créé avec le statut "pending" et nécessite une validation ultérieure
        - **Validation immédiate** : En passant `validate_immediately: true`, le transfert est créé ET validé automatiquement, mettant à jour les stocks en temps réel

        **Comportement lors de la validation immédiate :**
        - Vérifie que le stock disponible dans l'entrepôt source est suffisant
        - Diminue le stock de l'entrepôt source
        - Augmente le stock de l'entrepôt destination
        - Si le stock est insuffisant, la transaction échoue complètement (aucune création)
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'required Bearer Token. Example: Bearer 1|abc123xyz456'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      movement_type:
        name: movement_type
        description: 'Type de mouvement saisi manuellement.'
        required: true
        example: transfert
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      entrepot_from_id:
        name: entrepot_from_id
        description: "UUID de l'entrepôt source."
        required: true
        example: 550e8400-e29b-41d4-a716-446655440001
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      entrepot_to_id:
        name: entrepot_to_id
        description: "UUID de l'entrepôt destination (doit être différent de l'entrepôt source)."
        required: true
        example: 550e8400-e29b-41d4-a716-446655440002
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      note:
        name: note
        description: 'optional Note descriptive du transfert (max 1000 caractères).'
        required: false
        example: '"Transfert urgent pour réapprovisionner la succursale"'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      validate_immediately:
        name: validate_immediately
        description: 'optional Si true, valide le mouvement immédiatement après création et met à jour les stocks. Par défaut: false.'
        required: false
        example: true
        type: boolean
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      details:
        name: details
        description: 'Tableau des produits à transférer (minimum 1 produit).'
        required: true
        example:
          -
            product_id: 550e8400-e29b-41d4-a716-446655440003
            quantite: 10
        type: 'string[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'details[].product_id':
        name: 'details[].product_id'
        description: 'UUID du produit à transférer.'
        required: true
        example: 550e8400-e29b-41d4-a716-446655440003
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'details[].quantite':
        name: 'details[].quantite'
        description: 'Quantité à transférer (minimum 1).'
        required: true
        example: 10
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      movement_type: transfert
      entrepot_from_id: 550e8400-e29b-41d4-a716-446655440001
      entrepot_to_id: 550e8400-e29b-41d4-a716-446655440002
      note: '"Transfert urgent pour réapprovisionner la succursale"'
      validate_immediately: true
      details:
        -
          product_id: 550e8400-e29b-41d4-a716-446655440003
          quantite: 10
    fileParameters: []
    responses:
      -
        status: 201
        content: |-
          {
            "success": true,
            "data": {
              "stock_movement_id": "550e8400-e29b-41d4-a716-446655440010",
              "reference": "MV-2024-00001",
              "movement_type": "transfert",
              "entrepot_from_id": "550e8400-e29b-41d4-a716-446655440001",
              "entrepot_to_id": "550e8400-e29b-41d4-a716-446655440002",
              "statut": "pending",
              "note": "Transfert urgent",
              "user_id": "550e8400-e29b-41d4-a716-446655440050",
              "created_at": "2024-10-15T10:30:00.000000Z",
              "updated_at": "2024-10-15T10:30:00.000000Z",
              "entrepot_from": {
                "entrepot_id": "550e8400-e29b-41d4-a716-446655440001",
                "nom": "Entrepôt Principal",
                "adresse": "123 Rue Principale"
              },
              "entrepot_to": {
                "entrepot_id": "550e8400-e29b-41d4-a716-446655440002",
                "nom": "Entrepôt Secondaire",
                "adresse": "456 Avenue Commerce"
              },
              "user": {
                "user_id": "550e8400-e29b-41d4-a716-446655440050",
                "name": "Jean Dupont",
                "email": "jean.dupont@example.com"
              },
              "details": [
                {
                  "stock_movement_detail_id": "550e8400-e29b-41d4-a716-446655440011",
                  "stock_movement_id": "550e8400-e29b-41d4-a716-446655440010",
                  "product_id": "550e8400-e29b-41d4-a716-446655440003",
                  "quantite": 10,
                  "created_at": "2024-10-15T10:30:00.000000Z",
                  "product": {
                    "product_id": "550e8400-e29b-41d4-a716-446655440003",
                    "name": "Produit A",
                    "reference": "PROD-001",
                    "description": "Description du produit"
                  }
                }
              ]
            },
            "message": "Transfert entre entrepôts créé avec succès"
          }
        headers: []
        description: 'Transfert créé en mode pending'
        custom: []
      -
        status: 201
        content: |-
          {
            "success": true,
            "data": {
              "stock_movement_id": "550e8400-e29b-41d4-a716-446655440010",
              "reference": "MV-2024-00001",
              "movement_type": "transfert",
              "entrepot_from_id": "550e8400-e29b-41d4-a716-446655440001",
              "entrepot_to_id": "550e8400-e29b-41d4-a716-446655440002",
              "statut": "validated",
              "note": "Transfert urgent",
              "user_id": "550e8400-e29b-41d4-a716-446655440050",
              "created_at": "2024-10-15T10:30:00.000000Z",
              "updated_at": "2024-10-15T10:30:00.000000Z",
              "entrepot_from": {
                "entrepot_id": "550e8400-e29b-41d4-a716-446655440001",
                "nom": "Entrepôt Principal"
              },
              "entrepot_to": {
                "entrepot_id": "550e8400-e29b-41d4-a716-446655440002",
                "nom": "Entrepôt Secondaire"
              },
              "user": {
                "user_id": "550e8400-e29b-41d4-a716-446655440050",
                "name": "Jean Dupont"
              },
              "details": [
                {
                  "stock_movement_detail_id": "550e8400-e29b-41d4-a716-446655440011",
                  "product_id": "550e8400-e29b-41d4-a716-446655440003",
                  "quantite": 10,
                  "product": {
                    "product_id": "550e8400-e29b-41d4-a716-446655440003",
                    "name": "Produit A",
                    "reference": "PROD-001"
                  }
                }
              ]
            },
            "message": "Transfert entre entrepôts créé avec succès"
          }
        headers: []
        description: 'Transfert créé et validé immédiatement'
        custom: []
      -
        status: 401
        content: |-
          {
            "message": "Unauthenticated."
          }
        headers: []
        description: ''
        custom: []
      -
        status: 422
        content: |-
          {
            "success": false,
            "message": "Erreur de validation",
            "errors": {
              "entrepot_from_id": [
                "Le champ entrepot from id est obligatoire."
              ],
              "entrepot_to_id": [
                "Les entrepôts source et destination doivent être différents."
              ],
              "details.0.quantite": [
                "La quantité doit être au minimum 1."
              ]
            }
          }
        headers: []
        description: 'Erreurs de validation'
        custom: []
      -
        status: 500
        content: |-
          {
            "success": false,
            "message": "Erreur lors de la création du transfert",
            "error": "Stock insuffisant pour le produit Produit A. Disponible: 5, Demandé: 10"
          }
        headers: []
        description: 'Stock insuffisant lors de validation immédiate'
        custom: []
      -
        status: 500
        content: |-
          {
            "success": false,
            "message": "Erreur lors de la création du transfert",
            "error": "Message d'erreur détaillé"
          }
        headers: []
        description: 'Erreur serveur'
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/stock-movements/receipt/supplier
    metadata:
      groupName: 'Gestion des Mouvements de Stock'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: |-
        Crée un nouveau mouvement de réception de marchandise en provenance d'un fournisseur.
        La référence du mouvement est générée automatiquement au format MV-YYYY-XXXXX.

        **Options de validation :**
        - **Mode par défaut** : La réception est créée avec le statut "pending" et nécessite une validation ultérieure
        - **Validation immédiate** : En passant `validate_immediately: true`, la réception est créée ET validée automatiquement, augmentant le stock dans l'entrepôt de destination en temps réel

        **Comportement lors de la validation immédiate :**
        - Augmente automatiquement le stock dans l'entrepôt de destination
        - Crée les enregistrements de stock si le produit n'existe pas encore dans cet entrepôt
        - Met à jour les quantités existantes si le produit est déjà présent
        - Passe le statut à "validated" immédiatement

        **Cas d'usage typiques :**
        - Réception de commandes fournisseur
        - Réapprovisionnement d'entrepôt
        - Import de stock initial
        - Livraison de marchandises
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'required Bearer Token. Example: Bearer 1|abc123xyz456'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      movement_type:
        name: movement_type
        description: 'Type de mouvement saisi manuellement.'
        required: true
        example: entrée
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      fournisseur_id:
        name: fournisseur_id
        description: 'UUID du fournisseur source.'
        required: true
        example: 550e8400-e29b-41d4-a716-446655440100
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      entrepot_to_id:
        name: entrepot_to_id
        description: "UUID de l'entrepôt de destination qui recevra les produits."
        required: true
        example: 550e8400-e29b-41d4-a716-446655440002
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      note:
        name: note
        description: 'optional Note descriptive (ex: numéro de bon de commande, numéro de facture fournisseur, etc.). Max 1000 caractères.'
        required: false
        example: '"Réception commande #PO-2024-001 - Facture F-789456"'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      validate_immediately:
        name: validate_immediately
        description: 'optional Si true, valide la réception immédiatement après création et met à jour les stocks. Par défaut: false.'
        required: false
        example: false
        type: boolean
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      details:
        name: details
        description: 'Tableau des produits reçus avec leurs quantités (minimum 1 produit).'
        required: true
        example:
          -
            product_id: 550e8400-e29b-41d4-a716-446655440003
            quantite: 50
        type: 'string[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'details[].product_id':
        name: 'details[].product_id'
        description: 'UUID du produit reçu.'
        required: true
        example: 550e8400-e29b-41d4-a716-446655440003
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      'details[].quantite':
        name: 'details[].quantite'
        description: 'Quantité reçue (minimum 1).'
        required: true
        example: 50
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      movement_type: entrée
      fournisseur_id: 550e8400-e29b-41d4-a716-446655440100
      entrepot_to_id: 550e8400-e29b-41d4-a716-446655440002
      note: '"Réception commande #PO-2024-001 - Facture F-789456"'
      validate_immediately: false
      details:
        -
          product_id: 550e8400-e29b-41d4-a716-446655440003
          quantite: 50
    fileParameters: []
    responses:
      -
        status: 201
        content: |-
          {
            "success": true,
            "data": {
              "stock_movement_id": "550e8400-e29b-41d4-a716-446655440020",
              "reference": "MV-2024-00002",
              "movement_type": "entrée",
              "fournisseur_id": "550e8400-e29b-41d4-a716-446655440100",
              "entrepot_to_id": "550e8400-e29b-41d4-a716-446655440002",
              "statut": "pending",
              "note": "Réception commande #PO-2024-001",
              "user_id": "550e8400-e29b-41d4-a716-446655440050",
              "created_at": "2024-10-15T11:00:00.000000Z",
              "updated_at": "2024-10-15T11:00:00.000000Z",
              "entrepot_to": {
                "entrepot_id": "550e8400-e29b-41d4-a716-446655440002",
                "nom": "Entrepôt Secondaire",
                "adresse": "456 Avenue Commerce",
                "ville": "Cotonou"
              },
              "fournisseur": {
                "fournisseur_id": "550e8400-e29b-41d4-a716-446655440100",
                "nom": "Fournisseur ABC",
                "email": "contact@fournisseur-abc.com",
                "telephone": "+229 12 34 56 78"
              },
              "user": {
                "user_id": "550e8400-e29b-41d4-a716-446655440050",
                "name": "Marie Martin",
                "email": "marie.martin@example.com"
              },
              "details": [
                {
                  "stock_movement_detail_id": "550e8400-e29b-41d4-a716-446655440021",
                  "stock_movement_id": "550e8400-e29b-41d4-a716-446655440020",
                  "product_id": "550e8400-e29b-41d4-a716-446655440003",
                  "quantite": 50,
                  "created_at": "2024-10-15T11:00:00.000000Z",
                  "product": {
                    "product_id": "550e8400-e29b-41d4-a716-446655440003",
                    "name": "Produit B",
                    "reference": "PROD-002",
                    "description": "Description du produit B"
                  }
                }
              ]
            },
            "message": "Réception de fournisseur créée avec succès"
          }
        headers: []
        description: 'Réception créée en mode pending'
        custom: []
      -
        status: 201
        content: |-
          {
            "success": true,
            "data": {
              "stock_movement_id": "550e8400-e29b-41d4-a716-446655440020",
              "reference": "MV-2024-00002",
              "movement_type": "entrée",
              "fournisseur_id": "550e8400-e29b-41d4-a716-446655440100",
              "entrepot_to_id": "550e8400-e29b-41d4-a716-446655440002",
              "statut": "validated",
              "note": "Réception commande #PO-2024-001",
              "user_id": "550e8400-e29b-41d4-a716-446655440050",
              "created_at": "2024-10-15T11:00:00.000000Z",
              "updated_at": "2024-10-15T11:00:00.000000Z",
              "entrepot_to": {
                "entrepot_id": "550e8400-e29b-41d4-a716-446655440002",
                "nom": "Entrepôt Secondaire"
              },
              "fournisseur": {
                "fournisseur_id": "550e8400-e29b-41d4-a716-446655440100",
                "nom": "Fournisseur ABC"
              },
              "user": {
                "user_id": "550e8400-e29b-41d4-a716-446655440050",
                "name": "Marie Martin"
              },
              "details": [
                {
                  "stock_movement_detail_id": "550e8400-e29b-41d4-a716-446655440021",
                  "product_id": "550e8400-e29b-41d4-a716-446655440003",
                  "quantite": 50,
                  "product": {
                    "product_id": "550e8400-e29b-41d4-a716-446655440003",
                    "name": "Produit B",
                    "reference": "PROD-002"
                  }
                }
              ]
            },
            "message": "Réception de fournisseur créée avec succès"
          }
        headers: []
        description: 'Réception créée et validée immédiatement'
        custom: []
      -
        status: 401
        content: |-
          {
            "message": "Unauthenticated."
          }
        headers: []
        description: ''
        custom: []
      -
        status: 422
        content: |-
          {
            "success": false,
            "message": "Erreur de validation",
            "errors": {
              "fournisseur_id": [
                "Le fournisseur sélectionné n'existe pas."
              ],
              "entrepot_to_id": [
                "Le champ entrepot to id est obligatoire."
              ],
              "details": [
                "Le tableau details doit contenir au moins 1 élément."
              ],
              "details.0.quantite": [
                "La quantité doit être au minimum 1."
              ]
            }
          }
        headers: []
        description: 'Erreurs de validation'
        custom: []
      -
        status: 500
        content: |-
          {
            "success": false,
            "message": "Erreur lors de la création de la réception",
            "error": "Message d'erreur détaillé"
          }
        headers: []
        description: 'Erreur serveur'
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: 'api/stock-movements/{id}/validate'
    metadata:
      groupName: 'Gestion des Mouvements de Stock'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: |-
        Valide un mouvement de stock en attente et met à jour automatiquement les stocks dans les entrepôts concernés.
        Une fois validé, le mouvement ne peut plus être modifié, seulement annulé.

        **Comportement automatique :**
        - Pour un **transfert** : diminue le stock de l'entrepôt source et augmente celui de destination
        - Pour une **réception fournisseur** : augmente le stock de l'entrepôt de destination
        - Pour une **sortie client** : diminue le stock de l'entrepôt source

        **Vérifications effectuées :**
        - Le mouvement doit exister et être en statut "pending"
        - Pour les sorties : vérifie que le stock disponible (quantité - quantité réservée) est suffisant
        - Si le stock est insuffisant, la validation échoue avec un message d'erreur détaillé
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'required Bearer Token. Example: Bearer 1|abc123xyz456'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'UUID du mouvement de stock à valider.'
        required: true
        example: 550e8400-e29b-41d4-a716-446655440010
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanUrlParameters:
      id: 550e8400-e29b-41d4-a716-446655440010
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "stock_movement_id": "550e8400-e29b-41d4-a716-446655440010",
              "reference": "MV-2024-00001",
              "movement_type": "transfert",
              "entrepot_from_id": "550e8400-e29b-41d4-a716-446655440001",
              "entrepot_to_id": "550e8400-e29b-41d4-a716-446655440002",
              "statut": "validated",
              "note": "Transfert urgent",
              "user_id": "550e8400-e29b-41d4-a716-446655440050",
              "created_at": "2024-10-15T10:30:00.000000Z",
              "updated_at": "2024-10-15T10:35:00.000000Z",
              "entrepot_from": {
                "entrepot_id": "550e8400-e29b-41d4-a716-446655440001",
                "nom": "Entrepôt Principal"
              },
              "entrepot_to": {
                "entrepot_id": "550e8400-e29b-41d4-a716-446655440002",
                "nom": "Entrepôt Secondaire"
              },
              "user": {
                "user_id": "550e8400-e29b-41d4-a716-446655440050",
                "name": "Jean Dupont"
              },
              "details": [
                {
                  "stock_movement_detail_id": "550e8400-e29b-41d4-a716-446655440011",
                  "product_id": "550e8400-e29b-41d4-a716-446655440003",
                  "quantite": 10,
                  "product": {
                    "product_id": "550e8400-e29b-41d4-a716-446655440003",
                    "name": "Produit A",
                    "reference": "PROD-001"
                  }
                }
              ]
            },
            "message": "Mouvement de stock validé avec succès"
          }
        headers: []
        description: 'Validation réussie'
        custom: []
      -
        status: 400
        content: |-
          {
            "success": false,
            "message": "Ce mouvement est déjà validé"
          }
        headers: []
        description: 'Mouvement déjà validé'
        custom: []
      -
        status: 401
        content: |-
          {
            "message": "Unauthenticated."
          }
        headers: []
        description: ''
        custom: []
      -
        status: 404
        content: |-
          {
            "success": false,
            "message": "No query results for model [App\\Models\\StockMovement]."
          }
        headers: []
        description: 'Mouvement introuvable'
        custom: []
      -
        status: 500
        content: |-
          {
            "success": false,
            "message": "Erreur lors de la validation du mouvement",
            "error": "Stock insuffisant pour le produit Produit A. Disponible: 5, Demandé: 10"
          }
        headers: []
        description: 'Stock insuffisant'
        custom: []
      -
        status: 500
        content: |-
          {
            "success": false,
            "message": "Erreur lors de la validation du mouvement",
            "error": "Message d'erreur détaillé"
          }
        headers: []
        description: 'Erreur serveur'
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: 'api/stock-movements/{id}/cancel'
    metadata:
      groupName: 'Gestion des Mouvements de Stock'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: |-
        Annule un mouvement de stock précédemment validé et restaure automatiquement les stocks dans les entrepôts concernés.
        Seuls les mouvements avec le statut "validated" peuvent être annulés.

        **Comportement automatique :**
        - Pour un **transfert** : restaure le stock de l'entrepôt source et diminue celui de destination
        - Pour une **réception fournisseur** : diminue le stock de l'entrepôt de destination
        - Pour une **sortie client** : restaure le stock de l'entrepôt source

        **Important :**
        - L'annulation inverse exactement les mouvements effectués lors de la validation
        - Le statut du mouvement passe à "cancelled"
        - Un mouvement annulé ne peut plus être re-validé
        - Les stocks sont mis à jour en temps réel
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'required Bearer Token. Example: Bearer 1|abc123xyz456'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'UUID du mouvement de stock à annuler.'
        required: true
        example: 550e8400-e29b-41d4-a716-446655440010
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanUrlParameters:
      id: 550e8400-e29b-41d4-a716-446655440010
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "stock_movement_id": "550e8400-e29b-41d4-a716-446655440010",
              "reference": "MV-2024-00001",
              "movement_type": "transfert",
              "entrepot_from_id": "550e8400-e29b-41d4-a716-446655440001",
              "entrepot_to_id": "550e8400-e29b-41d4-a716-446655440002",
              "statut": "cancelled",
              "note": "Transfert urgent",
              "user_id": "550e8400-e29b-41d4-a716-446655440050",
              "created_at": "2024-10-15T10:30:00.000000Z",
              "updated_at": "2024-10-15T10:40:00.000000Z",
              "entrepot_from": {
                "entrepot_id": "550e8400-e29b-41d4-a716-446655440001",
                "nom": "Entrepôt Principal"
              },
              "entrepot_to": {
                "entrepot_id": "550e8400-e29b-41d4-a716-446655440002",
                "nom": "Entrepôt Secondaire"
              },
              "user": {
                "user_id": "550e8400-e29b-41d4-a716-446655440050",
                "name": "Jean Dupont"
              },
              "details": [
                {
                  "stock_movement_detail_id": "550e8400-e29b-41d4-a716-446655440011",
                  "product_id": "550e8400-e29b-41d4-a716-446655440003",
                  "quantite": 10,
                  "product": {
                    "product_id": "550e8400-e29b-41d4-a716-446655440003",
                    "name": "Produit A",
                    "reference": "PROD-001"
                  }
                }
              ]
            },
            "message": "Mouvement de stock annulé avec succès"
          }
        headers: []
        description: 'Annulation réussie'
        custom: []
      -
        status: 400
        content: |-
          {
            "success": false,
            "message": "Seuls les mouvements validés peuvent être annulés"
          }
        headers: []
        description: 'Mouvement non validé'
        custom: []
      -
        status: 401
        content: |-
          {
            "message": "Unauthenticated."
          }
        headers: []
        description: ''
        custom: []
      -
        status: 404
        content: |-
          {
            "success": false,
            "message": "No query results for model [App\\Models\\StockMovement]."
          }
        headers: []
        description: 'Mouvement introuvable'
        custom: []
      -
        status: 500
        content: |-
          {
            "success": false,
            "message": "Erreur lors de l'annulation du mouvement",
            "error": "Message d'erreur détaillé"
          }
        headers: []
        description: 'Erreur serveur'
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
